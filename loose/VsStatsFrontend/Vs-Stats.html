<!--
Made with <3 by Chris Crockett (chaorace@gmail.com) for Vicious Syndicate

http://www.chaorace.github.io
http://www.vicioussyndicate.com/

Licensed under the MIT license

-->

<!-- Polymer Imports -->
<link rel="import" href="./bower_components/polymer/polymer.html">
<link rel="import" href="./bower_components/paper-card/paper-card.html">
<link rel="import" href="./bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="./bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="./bower_components/google-chart/google-chart.html">
<link rel="import" href="./bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="./bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="./bower_components/neon-animation/neon-animations.html">
<link rel="import" href="./bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="./bower_components/paper-date-picker/paper-date-picker.html">
<link rel="import" href="./bower_components/paper-button/paper-button.html">
<link rel="import" href="./bower_components/paper-toggle-button/paper-toggle-button.html">
<link rel="import" href="./bower_components/paper-time-picker/paper-time-picker.html">
<link rel="import" href="./bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="./bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="./bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="./bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="./bower_components/paper-range-slider/paper-range-slider.html">
<link rel="import" href="./bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="./bower_components/paper-toast/paper-toast.html">
<link rel="import" href="./bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="./bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="./bower_components/paper-item/paper-item.html">
<link rel="import" href="./bower_components/paper-material/paper-material.html">

<!-- JS Imports -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js" integrity="sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css">
<script type="text/javascript" src="/bower_components/moment/min/moment.min.js"></script>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap/latest/css/bootstrap.css" />
<script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.10.0/jquery.timepicker.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-timepicker/1.10.0/jquery.timepicker.css">

<!-- ScalaJS Import -->
<script src="vsstatsfrontend-fastopt.js"></script>


<!-- Polymer module is internally called Vs-Stats -->
<dom-module id="Vs-Stats">
  <!-- Required for the Polymer implentation of the Flexbox layout -->
    <style include="iron-flex"></style>

    <template>
    <style>
      /*Hardcoded sizes, because it's not a full webpage and absolute control > resonsive design for applets*/
      paper-drawer-panel{
        height: 640px; width:455px; position:relative;
      }
      #mainChart{
        height: 310px;
      }
      .settingPanel{
        margin: .5em; padding: 1em;
      }
    </style>
        <!-- This container is used to create a drawer for the query settings to be tucked away in. force-narrow forces the drawer to always be hidden by default-->
        <paper-drawer-panel id="settingsDrawer" force-narrow="true" drawer-width="350px">
            <paper-header-panel drawer>
                <!-- TODO: Put settings here and plug them into the query -->
                <paper-material class="settingPanel" elevation="3">
                    <div>
                        <h4>Date Range</h4>
                        <input type="text" id="daterangePicker"/>
                    </div>
                    <div>
                        <h4>Rank Range</h4>
                        <paper-range-slider id="rankRangeSlider" min="0" max="25" snaps pin></paper-range-slider>
                    </div>
                    <div>
                        <h4>Time Range</h4>
                        <input id="startTimePicker" type="text" class="timePicker" autocomplete="off">
                        <input id="endTimePicker" type="text" class="timePicker" autocomplete="off">
                    </div>
                    <paper-dropdown-menu label="Format">
                        <paper-listbox class="dropdown-content" selected="1">
                            <paper-item>Standard</paper-item>
                            <paper-item>Wild</paper-item>
                        </paper-listbox>
                    </paper-dropdown-menu>
                    <div>
                        <h4>Regions</h4>
                        <paper-listbox multi>
                            <paper-item>Americas</paper-item>
                            <paper-item>Europe</paper-item>
                            <paper-item disabled>Asia</paper-item>
                        </paper-listbox>
                    </div>
                </paper-material>
            </paper-header-panel>
            <!-- Can't figure out why the styling here won't apply if it's in a stylesheet instead of hardcoded to the html. Will investigate later -->
            <!-- This element creates the floating card effect common in material design. Needs to be slightly smaller than the container so the shading effect shows up -->
            <paper-card style="width:99%; height:99%;" main>
                <paper-header-panel>
                  <!-- This adds a nice header with shading effect -->
                    <paper-toolbar>
                      <!-- Button that summons drawer panel -->
                        <paper-icon-button paper-drawer-toggle icon="menu"></paper-icon-button>
                        <span class="title">Vicious Syndicate Datareaper</span>
                    </paper-toolbar>
                    <!-- Flexbox layout tissue -->
                    <div class="vertical layout">
                      <paper-tabs id="pagePicker" selected="0">
                        <paper-tab>Class Composition</paper-tab>
                        <paper-tab>Matchup Breakdowns</paper-tab>
                        <paper-tab>Meta Simu-Breaker</paper-tab>
                      </paper-tabs>
                      <neon-animated-pages id="mainPages" selected="0">
                        <!-- This page only ever shows up while the json is loading, or if the json fails to load -->
                        <!-- TODO: Notify user if json fails to load, preferably with a relevant error message -->
                        <neon-animatable>
                          <paper-spinner active></paper-spinner>
                        </neon-animatable>
                        <neon-animatable>
                          <!-- Chart that shows basic class breakdown. Contents and styling is handled in the javascript below -->
                            <div class="horizontal center-justified layout">
                                <google-chart id="mainChart" type="pie"></google-chart>
                            </div>
                            <!-- Container for all of the individual class breakdown charts, contents are inserted using javascript below. Defaults to a page with a loading spinner before json is loaded -->
                          <neon-animated-pages id="classCharts" selected="9" entry-animation="fade-in-animation" exit-animation="fade-out-animation">
                              <neon-animatable id="0"></neon-animatable>
                              <neon-animatable id="1"></neon-animatable>
                              <neon-animatable id="2"></neon-animatable>
                              <neon-animatable id="3"></neon-animatable>
                              <neon-animatable id="4"></neon-animatable>
                              <neon-animatable id="5"></neon-animatable>
                              <neon-animatable id="6"></neon-animatable>
                              <neon-animatable id="7"></neon-animatable>
                              <neon-animatable id="8"></neon-animatable>
                              <!-- This page only ever shows up before the json is loaded, or if the json fails to load -->
                              <!-- TODO: Notify user if json fails to load, preferably with a relevant error message -->
                              <neon-animatable><paper-spinner active></paper-spinner></neon-animatable>
                          </neon-animated-pages>
                        </neon-animatable>
                        <neon-animatable>
                            <google-chart id="matchupChart" type="treemap"></google-chart>
                        </neon-animatable>
                      </neon-animated-pages>
                    </div>
                </paper-header-panel>
                <!-- TODO: Make the toast popup conform to the applet instead of the page -->
                <paper-toast id="toast" class="fit-bottom"></paper-toast>
            </paper-card>
        </paper-drawer-panel>
    </template>
    <!-- Polymer element boilerplate -->
    <script>
    Polymer({
    is: "Vs-Stats"
    // ready:
    //Stuff to do after the element is ready
    });
    </script>

    <script>
    $( function() {
        $(".timePicker").timepicker();
        $('#daterangePicker').daterangepicker({
            "showDropdowns": true,
            "timePickerSeconds": true,
            "linkedCalendars": false
        });
    });
    </script>
    <!-- ScalaJS main method hook -->
    <script>
        $(function() {
          Main().main();
        });
    </script>
</dom-module>
